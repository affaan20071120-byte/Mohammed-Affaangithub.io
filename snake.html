<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Snake Game — Affaan</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --text:#e7e8ee; --muted:#b7bbd0;
      --card: rgba(255,255,255,0.05);
      --line: rgba(255,255,255,0.12);
      --bg1:#0b0f2a; --bg2:#2b0d3a;
    }
    *{ box-sizing:border-box }
    body{ margin:0; min-height:100vh; color:var(--text); font-family:Poppins,system-ui,Arial; display:flex; align-items:center; justify-content:center; padding:20px;
      background: radial-gradient(1200px 800px at 20% 10%, rgba(255,60,80,0.10), transparent 60%),
                  radial-gradient(1000px 700px at 80% 30%, rgba(58,160,255,0.12), transparent 60%),
                  linear-gradient(180deg, var(--bg1), var(--bg2)); }
    .wrap{
      width:min(900px, 96vw);
      background:var(--card); border:1px solid var(--line); border-radius:16px; padding:18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      backdrop-filter: blur(6px);
    }
    .row{ display:flex; gap:18px; flex-wrap:wrap; align-items:flex-start; justify-content:center; }
    canvas{
      background: #0a0d20;
      border-radius:16px;
      box-shadow: 0 0 22px rgba(255,43,69,0.35), 0 0 28px rgba(58,160,255,0.25);
    }
    .panel{ min-width:240px; flex:1; }
    h1{ margin:6px 6px 12px; font-size:clamp(20px, 3.2vw, 28px); }
    p{ color:var(--muted); margin:8px 6px; }
    .score{ display:flex; gap:10px; align-items:center; margin: 10px 6px 16px; }
    .stat{ padding:8px 12px; border:1px solid var(--line); border-radius:12px; background:rgba(255,255,255,0.04); }
    .btns{ display:flex; gap:10px; flex-wrap:wrap; margin: 8px 6px; }
    button{
      padding:10px 14px; border-radius:12px; border:1px solid var(--line); background:rgba(0,0,0,0.2);
      color:var(--text); cursor:pointer; transition: transform .2s ease, box-shadow .2s ease;
    }
    button:hover{ transform: translateY(-2px); box-shadow: 0 0 14px rgba(255,43,69,0.4), 0 0 20px rgba(58,160,255,0.25); }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Snake Game</h1>
    <div class="row">
      <canvas id="game" width="480" height="480" aria-label="Snake game board" tabindex="0"></canvas>
      <div class="panel">
        <div class="score">
          <div class="stat">Score: <strong id="score">0</strong></div>
          <div class="stat">Best: <strong id="best">0</strong></div>
        </div>
        <p>
          A modern glowing Snake — built with <strong>HTML, CSS, JavaScript</strong>. Eat food, grow longer,
          and avoid hitting yourself. Use Arrow keys / WASD. Space to pause.
        </p>
        <div class="btns">
          <button id="restart">Restart</button>
          <button id="pause">Pause</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const cvs = document.getElementById('game');
    const ctx = cvs.getContext('2d');
    const size = 24;
    const cells = cvs.width / size;
    let dir = {x:1, y:0}, nextDir = {x:1, y:0};
    let snake, food, score, best, speed, running, frame;

    function init(){
      snake = [{x:8,y:10},{x:7,y:10},{x:6,y:10}];
      placeFood();
      score = 0; speed = 110; running = true;
      dir = {x:1, y:0}; nextDir = {x:1, y:0};
      document.getElementById('score').textContent = score;
      cancelAnimationFrame(frame);
      loop();
    }
    function placeFood(){
      food = {x: Math.floor(Math.random()*cells), y: Math.floor(Math.random()*cells)};
      if (snake?.some(s => s.x===food.x && s.y===food.y)) placeFood();
    }
    function drawGrid(){
      ctx.clearRect(0,0,cvs.width,cvs.height);
      ctx.fillStyle = '#0b0f2a';
      ctx.fillRect(0,0,cvs.width,cvs.height);
      ctx.strokeStyle = 'rgba(255,255,255,0.06)';
      ctx.lineWidth = 1;
      for(let i=0;i<=cells;i++){
        ctx.beginPath(); ctx.moveTo(i*size,0); ctx.lineTo(i*size,cvs.height); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0,i*size); ctx.lineTo(cvs.width,i*size); ctx.stroke();
      }
    }
    function drawSnake(){
      for (let i=0;i<snake.length;i++){
        const s = snake[i];
        const grad = ctx.createLinearGradient(s.x*size, s.y*size, s.x*size+size, s.y*size+size);
        grad.addColorStop(0, 'rgba(255,43,69,0.9)');
        grad.addColorStop(1, 'rgba(58,160,255,0.9)');
        ctx.fillStyle = grad;
        ctx.shadowBlur = 16; ctx.shadowColor = 'rgba(255,43,69,0.45)';
        ctx.fillRect(s.x*size+2, s.y*size+2, size-4, size-4);
        ctx.shadowBlur = 0;
      }
    }
    function drawFood(){
      const x = food.x*size + size/2;
      const y = food.y*size + size/2;
      const r = size*0.35;
      const g = ctx.createRadialGradient(x,y,0,x,y,r);
      g.addColorStop(0,'#fff');
      g.addColorStop(1,'rgba(255,255,255,0)');
      ctx.fillStyle = g;
      ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
      ctx.fillStyle = '#ffd166';
      ctx.beginPath(); ctx.arc(x,y,r*0.7,0,Math.PI*2); ctx.fill();
    }

    let last = 0;
    function loop(ts=0){
      if (!running){ frame = requestAnimationFrame(loop); return; }
      if (ts - last > speed){
        last = ts;
        step();
        render();
      }
      frame = requestAnimationFrame(loop);
    }
    function step(){
      dir = nextDir;
      const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
      head.x = (head.x + cells) % cells;
      head.y = (head.y + cells) % cells;
      if (snake.some((s,i)=> i>0 && s.x===head.x && s.y===head.y)){
        running = false;
        setTimeout(()=>alert('Game Over! Score: ' + score), 50);
        return;
      }
      snake.unshift(head);
      if (head.x===food.x && head.y===food.y){
        score += 10;
        document.getElementById('score').textContent = score;
        best = Math.max(score, Number(localStorage.getItem('best')||0));
        localStorage.setItem('best', best);
        document.getElementById('best').textContent = best;
        if (speed>70) speed -= 2;
        placeFood();
      } else {
        snake.pop();
      }
    }
    function render(){
      drawGrid(); drawFood(); drawSnake();
    }

    document.addEventListener('keydown', (e)=>{
      const k = e.key.toLowerCase();
      if (k==='arrowup' || k==='w'){ if (dir.y!==1){ nextDir={x:0,y:-1}; } }
      if (k==='arrowdown' || k==='s'){ if (dir.y!==-1){ nextDir={x:0,y:1}; } }
      if (k==='arrowleft' || k==='a'){ if (dir.x!==1){ nextDir={x:-1,y:0}; } }
      if (k==='arrowright' || k==='d'){ if (dir.x!==-1){ nextDir={x:1,y:0}; } }
      if (k===' '){ togglePause(); }
    });

    function togglePause(){
      running = !running;
      document.getElementById('pause').textContent = running ? 'Pause' : 'Resume';
    }

    document.getElementById('restart').addEventListener('click', init);
    document.getElementById('pause').addEventListener('click', togglePause);

    document.getElementById('best').textContent = Number(localStorage.getItem('best')||0);
    init(); render(); document.getElementById('game').focus();
  </script>
</body>
</html>
